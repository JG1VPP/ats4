@(pform: Form[Scaned], warn: Option[Html] = None)(implicit cfg: play.api.Configuration, req: RequestHeader)

@import comps._
@sects = @{Sections.all.map(_.getName.split(" ").tail.mkString(" ")).filterNot(_.contains("総合部門")).distinct}

@frame(title = "書類提出", nav = "entry") {
@if(warn.nonEmpty) {
<div class="alert alert-danger">
	<span class="glyphicon glyphicon-warning-sign"></span> @warn
</div>
} else {
<div class="alert alert-info">
	午前と午後の双方の部門に参加した場合は、午前と午後で別々に提出してください。
</div>
}
@helper.form(action = routes.Entry.post, 'class->"form-horizontal", 'enctype->"multipart/form-data") {
@helper.CSRF.formField
<div class="panel panel-default">
	<div class="panel-heading">
		<h2>登録内容</h2>
	</div>
	<fieldset class="panel-body">
		@input(pform("disp"), text = "呼出符号", hint = "移動運用の例: JA1ZLO/1")
		@choice(pform("city"), opts = CallArea.total, text = "運用場所", hint = "未選択")
		@choice(pform("part"), opts = sects, text = "参加部門", hint = "未選択")
		@input(pform("name"), text = "お名前", hint = "この宛名で賞を発送します。")
		@input(pform("addr"), text = "ご住所", hint = "この宛先に賞を発送します。")
		@input(pform("mail"), text = "メール", hint = "受理通知メールが届きます。")
		@input(pform("comm"), text = "ご感想", hint = "呼出符号付きで公表します。", multiline = true)
	</fieldset>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
		<h2>交信記録</h2>
	</div>
	<fieldset class="panel-body">
		@upload(id = "eLog", name  = "eLog", hint = "右のボタンをクリックして交信記録ファイルを選択します。")
		@accord(id = "fmts", title = "対応済みの電子ログのフォーマットの一覧を見る") {
		<ul>
		@for(fmt <- new qxsl.table.Tables()) {
			<li>@{fmt}</li>
		}
		</ul>
		}
	</fieldset>
	<div class="panel-footer">
		JARLサマリーシートをアップロードした場合は、交信記録の部分のみを読み取ります。
	</div>
</div>
<input class="btn btn-lg btn-primary" type="submit" value="この内容で提出します">
<a type="button" id="error-button" class="btn btn-lg btn-default" href="@routes.Guide.view">よくあるご質問</a>
}
}
