@(sections: Seq[qxsl.ruler.Section])(implicit cfg: play.api.Configuration, db: play.api.db.Database, admin: Boolean = false)

@link(record: Record) = @{if(admin) routes.Admin.sums(record.id) else "#%s".format(record.sect)}

@frame(title = if(admin) "管理画面" else "暫定結果", nav = if(admin) "admin" else "lists") {
@if(admin) {
<div class="alert alert-danger">
	このページは管理者用につき、外部から閲覧可能な場合は直ちに設定を変更せよ。
</div>
} else {
<div class="alert alert-info">
	掲載内容に誤りがある場合は、直ちに主催者に連絡してください。
	赤太字は暫定表彰局ですが、審査により失格することがあります。
</div>
}
@for(sect <- sections) {
<div class="par panel panel-default">
	<div class="panel-heading">
		<h3>@{sect.getName}</h3>
	</div>
@if(!DeadLine.isOK) {
	<div class="panel-body">
		<p class="text-info">現在、受付期間につき非公開とする。</p>
	</div>
} else if(Record.ofSect(sect.getName).nonEmpty) {
	<table class="table table-hover" id="@sect.getName">
		<thead>
			<tr>
				<th width="10%">順位</th>
				<th width="20%">呼出符号</th>
				<th width="10%">交信局数</th>
				<th width="10%">マルチ数</th>
				<th width="10%">総得点</th>
				<th width="40%">運用地</th>
			</tr>
		</thead>
		<tbody>
		@for(record <- Record.ofSect(sect.getName).sortBy(-_.score)) {
			<tr class="link @if(record.award) {award}" onclick="window.location='@link(record)';">
				<td>@{1 + record.place}</td>
				<td>@{record.call}</td>
				<td>@{record.calls}</td>
				<td>@{record.mults}</td>
				<td>@{record.score}</td>
				<td>@{record.city}</td>
			</tr>
		}
		</tbody>
	</table>
	<div class="panel-footer">
		<p>当該部門の登録者数の10%(小数点以下切捨て)に1を足した順位 (最大7位) までを表彰する。</p>
	</div>
}
</div>
}
}
