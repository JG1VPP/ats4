@(record: Record)(implicit cfg: Configuration, req: RequestHeader=null, admin: Boolean=false)

@import comps._

@summ = @{Tables(record.file,record.sect).score}

@comps.frame(title="提出書類の確認", nav=if(admin) "admin" else "entry") {
@if(!admin) {
<div class="alert alert-success">
	下記の内容で受理しました。
	交信記録が正しく読み込まれたかご確認ください。
	訂正が必要な場合は期間内に限り再提出できます。
</div>
}
<div class="card mb-5">
	<h3 class="card-header d-flex align-items-center justify-content-between border-bottom-0">
		<span>@record.sect</span>
		@if(admin) {
		<div class="btn-group">
			<a class="btn btn-outline-dark" href="@routes.Admin.form(Some(record.id))"><i class="fas fa-edit"></i></a>
			<a class="btn btn-outline-danger" href="#deleteModel" data-toggle="modal"><i class="fas fa-trash"></i></a>
		</div>
		}
	</h3>
	<table class="table">
		<colgroup>
			<col width="10%"></th>
			<col width="90%"></th>
		</colgroup>
		<tbody>
			<tr>
				<td>呼出符号</td>
				<td>@record.call</td>
			</tr>
			<tr>
				<td>運用場所</td>
				<td>@record.city</td>
			</tr>
			<tr>
				<td>お名前</td>
				<td>@record.name</td>
			</tr>
			<tr>
				<td>ご住所</td>
				<td>@record.addr</td>
			</tr>
			<tr>
				<td>連絡先</td>
				<td><a href="mailto:@record.mail">@record.mail</a></td>
			</tr>
		</tbody>
	</table>
</div>
@if(record.comm.nonEmpty) {
	<blockquote class="mb-5">
		@record.comm
	</blockquote>
}
@table(head="有効な交信", record, summ.accepted().map(_.item).toSeq) {
暫定の得点は<strong>@{summ.total}点</strong>(素点@{summ.score} 乗数@{summ.mults})です。
}
@table(head="無効な交信", record, summ.rejected().map(_.item).toSeq) {
<div class="d-flex align-items-center justify-content-between">
	<span>時間外の交信や部門外の周波数など、得点計算の対象外の交信です。</span>
	<a class="btn btn-lg btn-outline-secondary" href="@routes.Guide.view"><i class="fas fa-question"></i> よくあるご質問</a>
</div>
}
@if(admin) {
@helper.form(action=routes.Proof.elim(record.id)) {
@helper.CSRF.formField
<div class="modal" id="deleteModel">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">書類の削除</h4>
			</div>
			<div class="modal-body">
				<p>@record.call (@record.sect) を削除します。</p>
				<p class="text-danger">この操作は取り消せません。</p>
			</div>
			<div class="modal-footer">
				<button class="btn btn-danger" type="submit">削除する</button>
				<button class="btn btn-primary" data-dismiss="modal">削除しない</button>
			</div>
		</div>
	</div>
</div>
}
}
}
