@(team: Team)(implicit db: Database, req: RequestHeader, admin: Boolean=false)

@import comps._

@comps.frame(title="提出書類の確認", nav=if(admin) "admin" else "game") {
@if(!admin) {
<div class="alert alert-success">
	下記の内容で受理しました。
	交信記録が正しく読み込まれたかご確認ください。
	訂正が必要な場合は期間内に限り再提出できます。
</div>
}
<div class="card mb-5">
	<h3 class="card-header d-flex align-items-center justify-content-between border-bottom-0">
		<span>@team.call</span>
		@if(admin) {
		<div class="btn-group">
			<a class="btn btn-outline-dark" href="@routes.Admin.edit(team.call)"><i class="fas fa-edit"></i></a>
			<a class="btn btn-outline-danger" href="#deleteModel" data-toggle="modal"><i class="fas fa-trash"></i></a>
		</div>
		}
	</h3>
	<table class="table">
		<colgroup>
			<col width="20%">
			<col width="80%">
		</colgroup>
		<tbody>
			<tr>
				<td>お名前</td>
				<td>@team.name</td>
			</tr>
			<tr>
				<td>ご住所</td>
				<td>@team.addr</td>
			</tr>
			<tr>
				<td>連絡先</td>
				<td><a href="mailto:@team.mail">@team.mail</a></td>
			</tr>
		</tbody>
	</table>
</div>
@if(team.comm.nonEmpty) {
	<blockquote class="mb-5">
		@team.comm
	</blockquote>
}
@for(game <- models.Call(team.call).game) {
	@table(game,team)
}
@if(admin) {
<div class="modal" id="deleteModel">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">書類の削除</h4>
			</div>
			<div class="modal-body">
				<p>@{team.call}の書類を削除します。</p>
				<p class="text-danger">この操作は取り消せません。</p>
			</div>
			<div class="modal-footer">
				<button class="btn btn-danger" id="deleteButton">削除する</button>
				<button class="btn btn-primary" data-dismiss="modal">削除しない</button>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
$('#deleteButton').click(function () {
	$.ajax({type: "DELETE", url: "@helper.CSRF(routes.Proof.elim(team.call))"}).done(() => window.location="@routes.Admin.view");
});
</script>
}
}
