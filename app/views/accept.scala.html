@(post: Post, summ: qxsl.ruler.Summary, date: String)

@import qxsl.field._
@import scala.collection.JavaConversions._

@frame(title = "書類提出の完了", nav = "submit") {
	<div class="alert alert-success">
		下記の内容で提出書類を受理しました。訂正が必要な場合は期間内に限り再提出できます。</h4>
	</div>
	<h2><span class="glyphicon glyphicon-user"/> 参加局の情報</h2>
	<br>
	<h4>@{post.sect}</h4>
	<br>
	<table class="table">
		<tr>
			<th>受付時刻</th>
			<th>呼出符号</th>
			<th>運用地</th>
			<th>お名前</th>
			<th>メール</th>
			<th>ご住所</th>
		</tr>
		<tr>
			<td>@date</td>
			<td>@post.disp</td>
			<td>@post.city</td>
			<td>@post.name 様</td>
			<td>@post.mail</td>
			<td>@post.addr</td>
		</tr>
	</table>
@if(post.comm.nonEmpty) {
	<p>@post.comm</p>
}
	<br>
	<h2><span class="glyphicon glyphicon-tower"/> 暫定の得点</h2>
	<br>
	<p class="well">交信局数@post.cnt &amp; 獲得マルチ数@post.mul = <strong>@{post.cnt * post.mul}点</strong></p>
	<br>
	<h2><span class="glyphicon glyphicon-ok"/> 有効な交信</h2>
	<br>
	<div class="alert alert-warning">
		相手局の呼出符号や運用地が正しく処理されているかご確認ください
	</div>
	<table class="table">
		<tr>
			<th width="5%"></th>
			<th width="30%">交信日時</th>
			<th width="15%">相手局</th>
			<th width="15%">周波数帯</th>
			<th width="15%">通信方式</th>
			<th width="20%">運用地</th>
		</tr>
@{
	var index = 0
	val indexFormat = new java.text.DecimalFormat("000")
	val dateFormat = new java.text.SimpleDateFormat("yyyy年M月d日 HH時mm分")
	for(item <- summ.accepted()) yield(
		<tr>
			<td>{index += 1; indexFormat.format(index)}</td>
			<td>{dateFormat.format(item.get(classOf[Time]).value)}</td>
			<td>{item.get(classOf[Call])}</td>
			<td>{item.get(classOf[Band])}</td>
			<td>{item.get(classOf[Mode])}</td>
			<td>{item.getRcvd.get(classOf[Code])}</td>
		</tr>
	)
}
	</table>
	<br>
	<h2><span class="glyphicon glyphicon-remove"/> 無効な交信</h2>
	<br>
	<div class="alert alert-info">
		時間外の交信や部門外の周波数帯など、<strong>書類の不備</strong>により、得点計算の対象と認められない交信です
	</div>
	<div class="alert alert-warning">
		参加局は無効な交信リストを読み、有効となるべき交信があれば、必ず<strong>異議申し立て</strong>をしてください
	</div>
	<br>
	<table class="table">
		<tr>
			<th width="5%"></th>
			<th width="30%">交信日時</th>
			<th width="15%">相手局</th>
			<th width="15%">周波数帯</th>
			<th width="15%">通信方式</th>
			<th width="20%">運用地</th>
		</tr>
@{
	var index = 0
	val indexFormat = new java.text.DecimalFormat("000")
	val dateFormat = new java.text.SimpleDateFormat("yyyy年M月d日 HH時mm分")
	for(item <- summ.rejected()) yield(
		<tr>
			<td>{index += 1; indexFormat.format(index)}</td>
			<td>{dateFormat.format(item.get(classOf[Time]).value)}</td>
			<td>{item.get(classOf[Call])}</td>
			<td>{item.get(classOf[Band])}</td>
			<td>{item.get(classOf[Mode])}</td>
			<td>{item.getRcvd.get(classOf[Code])}</td>
		</tr>
	)
}
	</table>
	<br>
	<div class="alert alert-warning">
		このページを閉じると二度と表示されません。必ず控えを取ってください。
	</div>
	<fieldset>
		<a class="btn btn-primary" onclick="window.print()"><span class="glyphicon glyphicon-print"></span> 印刷する</a>
		<a class="btn btn-default" href="mailto:@Conf.mail"><span class="glyphicon glyphicon-earphone"></span> 不具合を報告</a>
	</fieldset>
	<br>
	<br>
}
